.\" ### DO NOT EDIT THIS FILE
.\" ### This man page is autogenerated by eclass-to-manpage.awk
.\" ### based on comments found in sage.eclass
.\"
.\" See eclass-to-manpage.awk for documentation on how to get
.\" your eclass nicely documented as well.
.\"
.TH "SAGE.ECLASS" 5 "Dez 2009" "Portage" "portage"
.SH "NAME"
sage.eclass \- Tools to ease the installation of Sage's spkg-packages and Sage itself
.SH "DESCRIPTION"
The sage eclass serves two purposes:
It eases the installation of Sage itself by providing functions for patching
and modifying its *.spkg-files.

In order to install packages from Sage's tarball this eclass provides a
src_unpack function for automatic unpacking. You must set the following two
variables to make use of this:

.nf
SAGE_VERSION
SAGE_PACKAGE
.fi

sage_src_unpack will then also correctly set the variables "S" and
"SAGE_FILESDIR".
.SH "EXAMPLE"
The following is a minimal version of the flintqs ebuild and shows the usage
for packages included in Sage's tarball:

.nf
EAPI=2

SAGE_VERSION="4.2.1"
SAGE_PACKAGE="flintqs-20070817.p4"

inherit eutils sage

[..]

src_prepare() {
	cp "${SAGE_FILESDIR}"/lanczos.h .

	[..]
}

[..]
.fi
.SH "FUNCTIONS"
.TP
\fBsage_clean_targets\fR [list of makefile targets to clean]
This function clears the prerequisites and commands of Sage in its
deps-makefile for the specified targets. If one wants to use e.g. sqlite from
portage, do the following:

.nf
sage_clean_targets SQLITE
.fi

This modifies ${S}/spkg/standard/deps, which contains in sage-4.2.1 the
following lines:

.nf
$(INST)/$(SQLITE): $(INST)/$(TERMCAP) $(INST)/$(READLINE)
    $(SAGE_SPKG) $(SQLITE) 2>&1
.fi

The results now looks like:

.nf
$(INST)/$(SQLITE):
    @echo "using SQLITE from portage"
.fi

so that ${S}/spkg/standard/deps is still a valid makefile but without building
sqlite.
.TP
\fBsage_package_patch\fR <spkg name> <patch name>
Applies a patch to the contents of a *.spkg-file. The spkg name must be be
given without the trailing ".spkg".
.TP
\fBsage_package_sed\fR <spkg name> <arguments for sed>
Executes 'sed' inside the contents of a *.spkg-file. The spkg name must be be
given without the trailing ".spkg".
.TP
\fBsage_package_cp\fR <spkg name> <arguments for cp>
Executes 'cp' inside the contents of a *.spkg-file. The spkg name must be be
given without the trailing ".spkg".
.TP
\fBsage_package_finish\fR 
ATTENTION: This function must be executed if one of the
sage_package_*-functions was called. This cleans up and packs all unpacked
spkgs.
.TP
\fBsage_src_unpack\fR 
TODO
.TP
\fBSAGE_FILESDIR\fR = \fI""\fR
Path to the "patches" directory of the current spkg
SAGE_FILESDIR=""
.SH "MAINTAINERS"
Francois Bissey <f.r.bissey@massey.ac.nz>
Christopher Schwan <cschwan@students.uni-mainz.de>

Original authors: Francois Bissey <f.r.bissey@massey.ac.nz>
Christopher Schwan <cschwan@students.uni-mainz.de>
.SH "REPORTING BUGS"
Please report bugs via http://bugs.gentoo.org/
.SH "FILES"
.BR /usr/portage/eclass/sage.eclass
.SH "SEE ALSO"
.BR ebuild (5)

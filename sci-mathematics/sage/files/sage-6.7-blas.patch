diff -Naur src.orig/module_list.py src/module_list.py
--- src.orig/module_list.py	2015-04-16 14:23:43.457470354 +1200
+++ src/module_list.py	2015-04-16 14:36:59.879286085 +1200
@@ -3,6 +3,7 @@
 import os
 from distutils.extension import Extension
 from sage.env import SAGE_LOCAL
+import pkgconfig
 
 SAGE_INC = os.path.join(SAGE_LOCAL, 'include')
 
@@ -10,26 +11,8 @@
 ### BLAS setup
 #########################################################
 
-## Choose cblas library -- note -- make sure to update sage/misc/cython.py
-## if you change this!!
-if os.environ.has_key('SAGE_BLAS'):
-    BLAS=os.environ['SAGE_BLAS']
-    BLAS2=os.environ['SAGE_BLAS']
-elif os.path.exists('%s/lib/libatlas.so'%os.environ['SAGE_LOCAL']):
-    BLAS='cblas'
-    BLAS2='atlas'
-elif os.path.exists('/usr/lib/libcblas.dylib') or \
-     os.path.exists('/usr/lib/libcblas.so'):
-    BLAS='cblas'
-    BLAS2='cblas'
-elif os.path.exists('/usr/lib/libblas.dll.a'):
-    BLAS='gslcblas'
-    BLAS2='gslcblas'
-else:
-    # This is very slow  (?), but *guaranteed* to be available.
-    BLAS='gslcblas'
-    BLAS2='gslcblas'
-
+blas_libs = list(pkgconfig.parse('cblas')['libraries'])
+blas_dir  = list(pkgconfig.parse('cblas')['library_dir'])
 
 #########################################################
 ### Commonly used definitions
@@ -606,42 +589,50 @@
 
     Extension('sage.gsl.callback',
               sources = ['sage/gsl/callback.pyx'],
-              libraries = ['gsl', BLAS, BLAS2],
+              library_dirs = blas_dir,
+              libraries = ['gsl'] + blas_libs,
               define_macros=[('GSL_DISABLE_DEPRECATED','1')]),
 
     Extension('sage.gsl.dwt',
               sources = ['sage/gsl/dwt.pyx'],
-              libraries=['gsl',BLAS],
+              library_dirs = blas_dir,
+              libraries=['gsl'] + blas_libs,
               define_macros=[('GSL_DISABLE_DEPRECATED','1')]),
 
     Extension('sage.gsl.fft',
               sources = ['sage/gsl/fft.pyx'],
-              libraries = ['gsl', BLAS, BLAS2],
+              library_dirs = blas_dir,
+              libraries = ['gsl'] + blas_libs,
               define_macros=[('GSL_DISABLE_DEPRECATED','1')]),
 
     Extension('sage.gsl.gsl_array',
               sources = ['sage/gsl/gsl_array.pyx'],
-              libraries=['gsl', BLAS, BLAS2],
+              library_dirs = blas_dir,
+              libraries=['gsl'] + blas_libs,
               define_macros=[('GSL_DISABLE_DEPRECATED','1')]),
 
     Extension('sage.gsl.integration',
               sources = ['sage/gsl/integration.pyx'],
               define_macros=[('GSL_DISABLE_DEPRECATED','1')],
-              libraries=['gsl',BLAS, BLAS2]),
+              library_dirs = blas_dir,
+              libraries=['gsl'] + blas_libs),
 
     Extension('sage.gsl.interpolation',
               sources = ['sage/gsl/interpolation.pyx'],
-              libraries = ['gsl', BLAS, BLAS2],
+              library_dirs = blas_dir,
+              libraries = ['gsl'] + blas_libs,
               define_macros=[('GSL_DISABLE_DEPRECATED','1')]),
 
     Extension('sage.gsl.ode',
               sources = ['sage/gsl/ode.pyx'],
-              libraries=['gsl',BLAS, BLAS2],
+              library_dirs = blas_dir,
+              libraries=['gsl'] + blas_libs,
               define_macros=[('GSL_DISABLE_DEPRECATED','1')]),
 
     Extension('sage.gsl.probability_distribution',
               sources = ['sage/gsl/probability_distribution.pyx'],
-              libraries=['gsl', BLAS, BLAS2],
+              library_dirs = blas_dir,
+              libraries=['gsl'] + blas_libs,
               define_macros=[('GSL_DISABLE_DEPRECATED','1')]),
 
     ################################
@@ -715,10 +706,11 @@
 
     Extension('sage.libs.linbox.linbox',
               sources = ['sage/libs/linbox/linbox.pyx'],
+              library_dirs = blas_dir,
               # For this to work on cygwin, linboxsage *must* be
               # before ntl.
               libraries = ['linboxsage', 'ntl', 'iml', 'linbox',
-                           'stdc++', 'givaro', 'mpfr', 'gmp', 'gmpxx', BLAS, BLAS2],
+                           'stdc++', 'givaro', 'mpfr', 'gmp', 'gmpxx'] + blas_libs,
               language = 'c++',
               extra_compile_args = givaro_extra_compile_args,
               depends = givaro_depends),
@@ -1028,7 +1020,8 @@
 
     Extension('sage.matrix.change_ring',
               sources = ['sage/matrix/change_ring.pyx'],
-              libraries=[BLAS, BLAS2, 'gmp']),
+              library_dirs = blas_dir,
+              libraries=['gmp'] + blas_libs),
 
     Extension('sage.matrix.matrix',
               sources = ['sage/matrix/matrix.pyx']),
@@ -1044,7 +1037,8 @@
 
     Extension('sage.matrix.matrix_complex_double_dense',
               sources = ['sage/matrix/matrix_complex_double_dense.pyx'],
-              libraries=[BLAS, BLAS2]),
+              library_dirs = blas_dir,
+              libraries= blas_libs),
 
     Extension('sage.matrix.matrix_cyclo_dense',
               sources = ['sage/matrix/matrix_cyclo_dense.pyx'],
@@ -1056,7 +1050,7 @@
 
     Extension('sage.matrix.matrix_double_dense',
               sources = ['sage/matrix/matrix_double_dense.pyx'],
-              libraries=[BLAS, BLAS2]),
+              libraries=blas_libs),
 
     Extension('sage.matrix.matrix_generic_dense',
               sources = ['sage/matrix/matrix_generic_dense.pyx']),
@@ -1066,9 +1060,10 @@
 
     Extension('sage.matrix.matrix_integer_dense',
               sources = ['sage/matrix/matrix_integer_dense.pyx'],
+              library_dirs = blas_dir,
               extra_compile_args = ['-std=c99'] + m4ri_extra_compile_args,
               # order matters for cygwin!!
-              libraries = ['iml', 'pari', 'ntl', 'gmp', 'm', 'flint', BLAS, BLAS2],
+              libraries = ['iml', 'pari', 'ntl', 'gmp', 'm', 'flint'] + blas_libs,
               depends = [SAGE_INC + '/m4ri/m4ri.h'] + flint_depends),
 
     Extension('sage.matrix.matrix_integer_sparse',
@@ -1090,14 +1085,16 @@
 
     Extension('sage.matrix.matrix_modn_dense_float',
               sources = ['sage/matrix/matrix_modn_dense_float.pyx'],
+              library_dirs = blas_dir,
               language="c++",
-              libraries = ['linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp', BLAS, BLAS2],
+              libraries = ['linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp'] + blas_libs,
               extra_compile_args = ['-DDISABLE_COMMENTATOR'] + givaro_extra_compile_args),
 
     Extension('sage.matrix.matrix_modn_dense_double',
               sources = ['sage/matrix/matrix_modn_dense_double.pyx'],
+              library_dirs = blas_dir,
               language="c++",
-              libraries = ['linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp', BLAS, BLAS2],
+              libraries = ['linbox', 'givaro', 'mpfr', 'gmpxx', 'gmp'] + blas_libs,
               extra_compile_args = ["-D_XPG6", "-DDISABLE_COMMENTATOR"]
                     + m4ri_extra_compile_args + givaro_extra_compile_args),
 
@@ -1114,9 +1111,10 @@
 
     Extension('sage.matrix.matrix_rational_dense',
               sources = ['sage/matrix/matrix_rational_dense.pyx'],
+              library_dirs = blas_dir,
               extra_compile_args = ["-std=c99", "-D_XPG6"] + m4ri_extra_compile_args,
               # order matters for cygwin!!
-              libraries = ['iml', 'pari', 'ntl', 'gmp', 'm', 'flint', BLAS, BLAS2],
+              libraries = ['iml', 'pari', 'ntl', 'gmp', 'm', 'flint'] + blas_libs,
               depends = [SAGE_INC + '/m4ri/m4ri.h'] + flint_depends),
 
     Extension('sage.matrix.matrix_rational_sparse',
@@ -1125,7 +1123,8 @@
 
     Extension('sage.matrix.matrix_real_double_dense',
               sources = ['sage/matrix/matrix_real_double_dense.pyx'],
-              libraries=[BLAS, BLAS2]),
+              library_dirs = blas_dir,
+              libraries= blas_libs),
 
     Extension('sage.matrix.matrix_sparse',
               sources = ['sage/matrix/matrix_sparse.pyx']),
@@ -1271,11 +1270,13 @@
 
     Extension('sage.modules.vector_complex_double_dense',
               ['sage/modules/vector_complex_double_dense.pyx'],
-              libraries = [BLAS, BLAS2]),
+              library_dirs = blas_dir,
+              libraries = blas_libs),
 
     Extension('sage.modules.vector_double_dense',
               ['sage/modules/vector_double_dense.pyx'],
-              libraries = [BLAS, BLAS2]),
+              library_dirs = blas_dir,
+              libraries = blas_libs),
 
     Extension('sage.modules.vector_integer_dense',
               sources = ['sage/modules/vector_integer_dense.pyx'],
@@ -1297,7 +1298,8 @@
 
     Extension('sage.modules.vector_real_double_dense',
               ['sage/modules/vector_real_double_dense.pyx'],
-              libraries = [BLAS, BLAS2]),
+              library_dirs = blas_dir,
+              libraries = blas_libs),
 
     # Extension('sage.modules.vector_rational_sparse',
     #           sources = ['sage/modules/vector_rational_sparse.pyx'],
@@ -1454,8 +1456,9 @@
 
     Extension('sage.rings.complex_double',
               sources = ['sage/rings/complex_double.pyx'],
+              library_dirs = blas_dir,
               extra_compile_args=["-std=c99", "-D_XPG6"],
-              libraries = (['gsl', BLAS, BLAS2, 'pari', 'gmp', 'm'])),
+              libraries = (['gsl', 'pari', 'gmp', 'm'] + blas_libs)),
 
     Extension('sage.rings.complex_interval',
               sources = ['sage/rings/complex_interval.pyx'],
@@ -1519,7 +1522,8 @@
 
     Extension('sage.rings.real_double',
               sources = ['sage/rings/real_double.pyx'],
-              libraries = ['gsl', 'gmp', BLAS, BLAS2],
+              library_dirs = blas_dir,
+              libraries = ['gsl', 'gmp'] + blas_libs,
               define_macros=[('GSL_DISABLE_DEPRECATED','1')]),
 
     Extension('sage.rings.real_interval_absolute',

--- sage-doctest.orig	2010-07-19 00:20:08.000000000 +0000
+++ sage-doctest	2010-07-31 16:39:28.336485284 +0000
@@ -87,11 +87,8 @@
 # Set environment variables
 ######################################################    
 SAGE_ROOT = os.environ["SAGE_ROOT"]
-LD = os.environ["LD_LIBRARY_PATH"]
-os.environ["LD_LIBRARY_PATH"] = os.path.join(SAGE_ROOT, 'local',
-                                             'lib') + ":" + LD
-os.environ["PYTHONPATH"] = os.path.join(SAGE_ROOT, 'local', 'lib', 'python',
-                                        'site-packages')
+SAGE_LOCAL = os.environ["SAGE_LOCAL"]
+
 if os.environ.has_key('SAGE_PATH'):
     os.environ["PYTHONPATH"] = os.environ["PYTHONPATH"] + ':' + os.environ['SAGE_PATH']
 
@@ -170,7 +167,7 @@
     # 1-253: number of failed doctests
     # 254: >= 254 doctests failed
     # 255: exception raised by doctesting framework
-    dict = { 'DIR'             : repr(os.path.join(SAGE_ROOT, 'local', 'bin')),
+    dict = { 'DIR'             : repr(os.path.join(SAGE_LOCAL, 'bin')),
              'FILENAME'        : repr(filename),
              'OUTPUT_FILENAME' : repr(filename + '.timeit.sobj'),
              'TIMEIT'          : do_timeit, # global
--- sage-ptest.orig	2010-07-31 16:41:28.144485444 +0000
+++ sage-ptest	2010-07-31 16:45:03.057486262 +0000
@@ -17,7 +17,8 @@
     numglobaliteration = 1
 
 SAGE_ROOT = os.environ['SAGE_ROOT']
-SAGE_SITE = os.path.realpath(os.path.join(os.environ['SAGE_LOCAL'],
+SAGE_LOCAL = os.environ['SAGE_ROOT']
+SAGE_SITE = os.path.realpath(os.path.join(SAGE_LOCAL,
                                           'lib', 'python', 'site-packages'))
 BUILD_DIR = os.path.realpath(os.path.join(SAGE_ROOT, 'devel', 'sage', 'build'))
 
@@ -108,7 +109,7 @@
     filestr = os.path.split(F)[1]
     for i in range(0,numiteration):
         os.chdir(os.path.dirname(F))
-        command = os.path.join(SAGE_ROOT, 'local', 'bin', 'sage-%s' % cmd)
+        command = os.path.join(SAGE_LOCAL, 'bin', 'sage-%s' % cmd)
         s = 'bash -c "%s %s > %s" ' % (command, filestr, outfile.name)
         try:
             t = time.time()
--- sage-test.orig	2010-07-31 16:44:14.614486009 +0000
+++ sage-test	2010-07-31 16:44:50.709495411 +0000
@@ -42,7 +42,8 @@
 
 
 SAGE_ROOT = os.environ['SAGE_ROOT']
-SAGE_SITE = os.path.realpath(os.path.join(os.environ['SAGE_LOCAL'],
+SAGE_LOCAL = os.environ['SAGE_LOCAL']
+SAGE_SITE = os.path.realpath(os.path.join(SAGE_LOCAL,
                                           'lib', 'python', 'site-packages'))
 
 if 'SAGE_TESTDIR' not in os.environ:
@@ -79,7 +80,7 @@
     t = time.time()
     if skip(F):
         return 0
-    s = os.path.join(SAGE_ROOT, 'local', 'bin', 'sage-%s' % cmd) + ' "%s"' % F
+    s = os.path.join(SAGE_LOCAL, 'bin', 'sage-%s' % cmd) + ' "%s"' % F
     err = os.system(s)
     # On unix systems, the return value of os.system has the process return
     # value in the second byte.
--- sage-maketest.orig	2010-07-31 16:53:36.195486104 +0000
+++ sage-maketest	2010-07-31 16:54:48.481485422 +0000
@@ -7,7 +7,7 @@
 SAGE_TEST_LOG="$SAGE_TESTDIR/test.log"
 cd "$SAGE_TESTDIR"
 
-cat "$SAGE_ROOT/local/bin/sage-banner" > "$SAGE_TEST_LOG"
+cat "$SAGE_LOCAL/bin/sage-banner" > "$SAGE_TEST_LOG"
 echo `date` >> "$SAGE_TEST_LOG"
 
 if [ -d $SAGE_ROOT/examples ]; then
--- sage-ipython.orig	2010-07-31 17:00:23.038485841 +0000
+++ sage-ipython	2010-07-31 17:00:31.462485494 +0000
@@ -35,7 +35,7 @@
 
 
 
-sage_commands = os.listdir(os.environ['SAGE_ROOT']+"/local/bin/")
+sage_commands = os.listdir(os.environ['SAGE_LOCAL']+"/bin/")
 DARWIN_SYSTEM = os.uname()[0]=='Darwin'
 
 def sage_system(self, cmd):

--- SConstruct.orig	2009-12-18 18:01:58.772958903 +0000
+++ SConstruct	2009-12-18 18:05:44.250757094 +0000
@@ -1269,6 +1269,11 @@
     env.AlwaysBuild(ipboribin)   
     env.Alias('install', ipboribin)
 
+    # we dump the flags for reuse by Sage
+    if not path.exists(InstPath()):
+        Execute(Mkdir(InstPath()))
+    opts.Save(InstPath("flags.conf"), env)
+
 env.Alias('prepare-devel', devellibs + readabledevellibs)
 env.Alias('prepare-install', [pyroot, DocPath()])
 

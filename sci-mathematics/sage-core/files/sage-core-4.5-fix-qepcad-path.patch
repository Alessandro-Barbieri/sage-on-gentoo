--- sage/interfaces/qepcad.py.orig	2010-07-17 22:31:11.770400844 +0000
+++ sage/interfaces/qepcad.py	2010-07-18 08:31:48.866053633 +0000
@@ -558,7 +558,7 @@
         memcells_arg = '+N%s' % memcells
     else:
         memcells_arg = ''
-    return "env qe=%s qepcad %s"%(sage.misc.misc.SAGE_LOCAL, memcells_arg)
+    return "env qe=%s qepcad %s"%(sage.misc.misc.DOT_SAGE, memcells_arg)
 
 _command_info_cache = None
 
@@ -579,7 +579,7 @@
 
     cache = {}
 
-    with open('%s/bin/qepcad.help'%sage.misc.misc.SAGE_LOCAL) as help:
+    with open('@GENTOO_PORTAGE_EPREFIX@/usr/share/qepcad/qepcad.help') as help:
         assert(help.readline().strip() == '@')
 
         while True:
@@ -636,15 +636,15 @@
     EXAMPLES:
         sage: from sage.interfaces.qepcad import _rewrite_qepcadrc
         sage: _rewrite_qepcadrc()
-        sage: from sage.misc.misc import SAGE_LOCAL
-        sage: open('%s/default.qepcadrc'%SAGE_LOCAL).readlines()[-1]
+        sage: from sage.misc.misc import DOT_SAGE
+        sage: open('%s/default.qepcadrc'%DOT_SAGE).readlines()[-1]
         'SINGULAR .../local//bin'
     """
     global _rewrote_qepcadrc
     if _rewrote_qepcadrc: return
 
     SL = sage.misc.misc.SAGE_LOCAL
-    fn = '%s/default.qepcadrc'%SL
+    fn = '%s/default.qepcadrc'%sage.misc.misc.DOT_SAGE
     text = \
 """# THIS FILE IS AUTOMATICALLY GENERATED -- DO NOT EDIT
 

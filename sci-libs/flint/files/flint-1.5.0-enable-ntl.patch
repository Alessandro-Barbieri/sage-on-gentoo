--- makefile.orig	2009-12-12 08:24:11.506837730 +0000
+++ makefile	2009-12-12 09:20:05.938837441 +0000
@@ -20,7 +20,7 @@
 	FLINT_CPP = g++
 endif
 
-CPP = $(FLINT_CPP) 
+CPP = $(FLINT_CPP) -fPIC
 
 LIBS = -L$(FLINT_GMP_LIB_DIR) $(FLINT_LINK_OPTIONS) -lgmp -lpthread -lm -lzn_poly
 
@@ -61,7 +61,8 @@
 	theta.h \
 	zmod_mat.h \
 	F_mpz.h \
-	QS/tinyQS.h
+	QS/tinyQS.h \
+	NTL-interface.h
 
 ####### library object files
 
@@ -89,11 +90,14 @@
 	linear_algebra.o \
 	block_lanczos.o
 
+FLINTNTLOBJ = \
+	NTL-interface.o
+
 QS: mpQS
 
 tune: ZmodF_mul-tune mpz_poly-tune 
 
-test: F_mpz-test mpn_extras-test fmpz_poly-test fmpz-test ZmodF-test ZmodF_poly-test mpz_poly-test ZmodF_mul-test long_extras-test zmod_poly-test zmod_mat-test
+test: F_mpz-test mpn_extras-test fmpz_poly-test fmpz-test ZmodF-test ZmodF_poly-test mpz_poly-test ZmodF_mul-test long_extras-test zmod_poly-test zmod_mat-test NTL-interface-test
 
 check: test
 	./F_mpz-test
@@ -125,8 +129,8 @@
 libflint.dll: $(FLINTOBJ)
 	$(CC) -fPIC -shared -o libflint.dll $(FLINTOBJ) $(LIBS)
 
-libflint.so: $(FLINTOBJ)
-	$(CC) -fPIC -shared -o libflint.so $(FLINTOBJ) $(LIBS)
+libflint.so: $(FLINTOBJ) $(FLINTNTLOBJ)
+	$(CC) -fPIC -shared -o libflint.so $(FLINTOBJ) $(FLINTNTLOBJ) $(LIBS2)
 
 ##### Object files
 
@@ -317,8 +321,8 @@
 F_mpz_poly-test: F_mpz_poly-test.o test-support.o $(FLINTOBJ) $(HEADERS)
 	$(CC) $(CFLAGS) F_mpz_poly-test.o test-support.o -o F_mpz_poly-test $(FLINTOBJ) $(LIBS)
 
-NTL-interface-test: NTL-interface.o NTL-interface-test.o test-support.o $(FLINTOBJ) $(HEADERS)
-	$(CPP) $(CFLAGS) NTL-interface-test.o NTL-interface.o test-support.o $(FLINTOBJ) -o NTL-interface-test $(LIBS2)
+NTL-interface-test: NTL-interface.o NTL-interface-test.o test-support.o $(FLINTOBJ) $(FLINTNTLOBJ) $(HEADERS)
+	$(CPP) $(CXXFLAGS) NTL-interface-test.o test-support.o $(FLINTOBJ) $(FLINTNTLOBJ) -o NTL-interface-test $(LIBS2)
 
 ####### tuning program object files
 
